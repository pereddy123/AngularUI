<h2>Task Detail</h2>

<div *ngIf="task">
  <p><strong>Title:</strong> {{ task.title }}</p>
  <p><strong>Description:</strong> {{ task.description }}</p>
  <p><strong>Assigned To:</strong> {{ task.assignedToUsername }}</p>
  <p><strong>Due Date:</strong> {{ task.dueDate | date:'mediumDate' }}</p>

  <hr />
  <label>Status:</label>
  <select [(ngModel)]="selectedStatus">
    <option value="New">New</option>
    <option value="In Progress">In Progress</option>
    <option value="Completed">Completed</option>
  </select>
  <button (click)="updateStatus()">Update Status</button>

  <hr />
  <h4>Comments</h4>

  <ul *ngIf="comments.length > 0; else noComments">
    <li *ngFor="let c of comments">
      <strong>{{ c.commentedBy }}</strong> ({{ c.timestamp | date:'short' }}):
      <div>{{ c.commentText }}</div>
    </li>
  </ul>

  <ng-template #noComments>
    <p>No comments yet.</p>
  </ng-template>

  <textarea [(ngModel)]="newComment" placeholder="Add a comment..."></textarea>
  <br />
  <button (click)="addComment()">Submit Comment</button>
</div>
